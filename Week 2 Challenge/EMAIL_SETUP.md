# Email Setup Guide

## Overview

The Meeting Action Items Extractor can automatically send meeting summaries via email to participants using SMTP.

## Quick Setup

### 1. Create .env File

Copy the example file:
```bash
cp .env.example .env
```

### 2. Configure SMTP Settings

Edit `.env` with your email provider settings:

```env
SMTP_SERVER=smtp.gmail.com
SMTP_PORT=587
SMTP_USERNAME=your-email@gmail.com
SMTP_PASSWORD=your-app-password
```

### 3. Test Configuration

```bash
python main.py test-email
```

## Email Provider Setup

### Gmail

1. **Enable 2-Factor Authentication**
   - Go to Google Account settings
   - Security â†’ 2-Step Verification
   - Turn on 2-Step Verification

2. **Generate App Password**
   - Go to https://myaccount.google.com/apppasswords
   - Select "Mail" and your device
   - Copy the 16-character password
   - Use this as `SMTP_PASSWORD` in .env

3. **Configuration**
   ```env
   SMTP_SERVER=smtp.gmail.com
   SMTP_PORT=587
   SMTP_USERNAME=your-email@gmail.com
   SMTP_PASSWORD=your-16-char-app-password
   ```

### Outlook/Office 365

```env
SMTP_SERVER=smtp.office365.com
SMTP_PORT=587
SMTP_USERNAME=your-email@outlook.com
SMTP_PASSWORD=your-password
```

### Yahoo Mail

```env
SMTP_SERVER=smtp.mail.yahoo.com
SMTP_PORT=587
SMTP_USERNAME=your-email@yahoo.com
SMTP_PASSWORD=your-app-password
```

Note: Yahoo also requires an app password. Generate one at:
https://login.yahoo.com/account/security

### Custom SMTP Server

```env
SMTP_SERVER=mail.yourcompany.com
SMTP_PORT=587
SMTP_USERNAME=your-username
SMTP_PASSWORD=your-password
```

## Usage

### Send to Single Recipient

```bash
python main.py parse meeting.txt --email john@example.com
```

### Send to Multiple Recipients

```bash
python main.py parse meeting.txt --email "john@example.com,jane@example.com,team@example.com"
```

### With CC Recipients

```bash
python main.py parse meeting.txt \
  --email "john@example.com,jane@example.com" \
  --email-cc "manager@example.com"
```

### Attach Original Transcript

```bash
python main.py parse meeting.txt \
  --email "team@example.com" \
  --attach-transcript
```

### Complete Example

```bash
python main.py parse sample_transcripts/zoom_meeting.txt \
  --title "Sprint Planning" \
  --date "December 7, 2025" \
  --email "team@example.com,stakeholders@example.com" \
  --email-cc "manager@example.com" \
  --attach-transcript \
  --format both
```

## Email Format

### Subject Line

```
Action Items from [Meeting Title] - [Date]
```

Example:
```
Action Items from Sprint Planning - December 07, 2025
```

### Email Body

The email includes:

1. **Professional Header**
   - Meeting title
   - Meeting date
   - Generated timestamp

2. **Summary Statistics**
   - Total action items
   - Priority breakdown
   - Assignee count

3. **Action Items**
   - Organized by assignee
   - With deadlines and priorities
   - Color-coded by priority

4. **HTML Formatting**
   - Beautiful HTML email for modern clients
   - Plain text fallback for older clients
   - Responsive design

### Example Email

```
Subject: Action Items from Sprint Planning - December 07, 2025

Hello Team,

Please find below the action items from our Sprint Planning meeting 
held on December 07, 2025.

======================================================================

ðŸ“‹ Sprint Planning - Action Items

Date: December 07, 2025
Generated: 2025-12-07 14:30

---

ðŸ“Š Summary Statistics

- Total Action Items: 12
- Assigned: 10 | Unassigned: 2
- Priority Breakdown:
  - ðŸ”´ High: 4
  - ðŸŸ¡ Medium: 8
  - ðŸŸ¢ Low: 0

---

âœ… Action Items

1. ðŸ”´ [ ] Update API documentation by Friday
   - Assignee: @Mike Johnson
   - Deadline: 2025-12-12
   - Priority: High

[... more action items ...]

======================================================================

This summary was automatically generated by the Meeting Action Items Extractor.

Please review your assigned action items and reach out if you have any questions.

Best regards,
Meeting Action Items Extractor
```

## Troubleshooting

### Authentication Failed

**Error:** `Email authentication failed`

**Solutions:**
1. Check username and password are correct
2. For Gmail, use App Password (not regular password)
3. Verify 2-factor authentication is enabled
4. Check if "Less secure app access" is needed (not recommended)

### Connection Timeout

**Error:** `SMTP connection test failed`

**Solutions:**
1. Check SMTP server address and port
2. Verify firewall allows SMTP connections
3. Try different port (587 for TLS, 465 for SSL)
4. Check if VPN is blocking SMTP

### Invalid Recipients

**Error:** `All recipients must be valid email addresses`

**Solutions:**
1. Check email addresses have @ symbol
2. Remove spaces around commas
3. Use quotes for multiple addresses: `"email1@example.com,email2@example.com"`

### Attachment Too Large

**Error:** `Failed to attach file`

**Solutions:**
1. Check transcript file size (most servers limit to 25MB)
2. Compress large transcripts
3. Send without attachment using `--attach-transcript` flag

## Security Best Practices

### 1. Use App Passwords

Never use your main email password. Always generate app-specific passwords.

### 2. Protect .env File

Add `.env` to `.gitignore`:
```bash
echo ".env" >> .gitignore
```

### 3. Use Environment Variables

For production, use system environment variables instead of .env file:

```bash
export SMTP_SERVER=smtp.gmail.com
export SMTP_PORT=587
export SMTP_USERNAME=your-email@gmail.com
export SMTP_PASSWORD=your-app-password
```

### 4. Rotate Credentials

Regularly rotate app passwords and revoke unused ones.

### 5. Use TLS

Always use TLS encryption (port 587) instead of unencrypted SMTP (port 25).

## Advanced Configuration

### Custom Email Template

Modify `src/email_sender.py` to customize the email template:

```python
def _create_plain_text_body(self, summary_content, meeting_title, meeting_date):
    # Customize your email template here
    template = f"""
    Your custom email template
    """
    return template
```

### HTML Styling

Customize HTML email styling in `_markdown_to_html()` method:

```python
def _markdown_to_html(self, markdown_content, meeting_title, meeting_date):
    # Customize HTML styles here
    html = """
    <style>
        /* Your custom CSS */
    </style>
    """
    return html
```

### Multiple SMTP Accounts

Use different SMTP accounts for different purposes:

```python
# Personal account
personal_sender = EmailSender(
    smtp_username="personal@gmail.com",
    smtp_password="personal-app-password"
)

# Work account
work_sender = EmailSender(
    smtp_username="work@company.com",
    smtp_password="work-password"
)
```

## Testing

### Test SMTP Connection

```bash
python main.py test-email
```

Output:
```
ðŸ”§ Testing Email Configuration

SMTP Server: smtp.gmail.com
SMTP Port: 587
SMTP Username: your-email@gmail.com
Use TLS: True

ðŸ”Œ Testing SMTP connection... âœ“

âœ… Email configuration is working!

You can now send emails using:
  python main.py parse meeting.txt --email recipient@example.com
```

### Send Test Email

```bash
python main.py parse sample_transcripts/zoom_meeting.txt \
  --email your-email@example.com \
  --title "Test Meeting"
```

## FAQ

### Q: Can I use Gmail without App Password?

A: No, Gmail requires App Passwords when 2FA is enabled. This is more secure than using your main password.

### Q: How many recipients can I send to?

A: Most SMTP servers limit to 50-100 recipients per email. For larger lists, consider using a mailing list service.

### Q: Can I schedule emails?

A: Not directly. Use cron (Linux/Mac) or Task Scheduler (Windows) to schedule the command.

### Q: Does it support attachments other than transcripts?

A: Currently only transcript attachments are supported. Modify `src/email_sender.py` to add more.

### Q: Can I send to BCC recipients?

A: Yes, modify the `send_summary()` call in `main.py` to include `bcc` parameter.

### Q: Is my password secure?

A: Passwords in .env are stored in plain text. Use system environment variables for production, and never commit .env to version control.

## Support

For issues:
1. Check `meeting_extractor.log` for detailed errors
2. Run `python main.py test-email` to diagnose
3. Verify SMTP settings with your email provider
4. Check firewall and network settings

## Examples

### Daily Standup Summary

```bash
python main.py parse standup.txt \
  --title "Daily Standup" \
  --email "team@company.com" \
  --format markdown
```

### Sprint Planning with Stakeholders

```bash
python main.py parse sprint-planning.txt \
  --title "Sprint Planning Q1 2025" \
  --email "dev-team@company.com" \
  --email-cc "stakeholders@company.com,management@company.com" \
  --attach-transcript \
  --format both
```

### Weekly Team Meeting

```bash
python main.py parse weekly-meeting.txt \
  --title "Weekly Team Sync" \
  --date "December 7, 2025" \
  --email "team@company.com" \
  --context
```
